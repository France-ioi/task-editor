<% for(var i=0; i<data.length; i++) { %>
    <% var type = 'multiple';
        if('format' in data[i]) {
            type = 'input'
        } else if('correct_answer' in data[i]) {
            type = 'single'
        } else if('non_answers' in data[i]) {
            type = 'fill_gaps'
        }
    %>
    <question type="<%- type %>">
        <statement><%- data[i].text %></statement>

        <% if(type == 'input') { %>
            <answer format="<%- data[i].format %>" validator="<%- data[i].validator %>"></answer>
        <% } else if(type == 'fill_gaps') { %>
            <% var words = this.helpers.shuffle(data[i].answers.concat(data[i].non_answers || [])); %>
            <% for(var j=0; j<words.length; j++) { %>
                <answer><%- words[j] %></answer>
            <% } %>
        <% } else { for(var j=0; j<data[i].answers.length; j++) { %>
            <answer><%- data[i].answers[j].text %></answer>
        <% }} %>

        <% if(data[i].solution) { %>
            <solution class="remove"><%- data[i].solution %></solution>
        <% } %>
    </question>
<% } %>